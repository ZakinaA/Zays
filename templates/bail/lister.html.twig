{% extends 'base.html.twig' %}
{% block contenu %}
<head>
    <title> Liste des appartements </title>
</head>
<br/>
<h3>Listes des appartements</h3>
<br/>

    <div class="card-body">
    <div class="table-responsive">

<table class="table text-sm mb-0 table-striped">
<thead>
    <tr>
        <th width="10%" scope="col">Appartement</th>
        <th width="15%" scope="col">Locataire</th>
        <th scope="col">Loyer HC</th>
        <th scope="col">Loyer TTC</th>
        <th scope="col">Caution</th>
        <th scope="col">Date entrée</th>
        <th scope="col">Surface</th>
    </tr>
</thead>
{% for b in baux %}
<tr>
    <td><a href=""> {{ b.appartement.porte }}</a></td>
    <td><a href=""> {{b.locataires[0].nom}} {{b.locataires[0].prenom}}
                    {% if b.locataires[1] is defined %} {{b.locataires[1].nom}} {% endif %}
                    {% if b.locataires[1] is defined %} {{b.locataires[1].prenom}} {% endif %}
    </a> </td>

    <td>{{ b.montantHC }} {% if b.montantHC != null %}€{% endif %}</td>
    <td>{{ b.montantHC + b.montantCharges }} {% if b.montantHC + b.montantCharges != null %}€{% endif %}</td>
    <td>{{ b.montantCaution }} {% if b.montantCaution != null %}€{% endif %}</td>
    <td>{{ b.dateDebut|date("d/m/Y") }}</td>
    <td>{{ b.appartement.surface }} {% if b.appartement.surface != null %}m²{% endif %}</td>
</tr>
    
{% else %}
<tr>
<td>Aucun appartement n'a été trouvé.</td>
</tr>
{% endfor %}

<tr>
    <th></th> <th></th>
    <th scope="col"> Montant total LoyerHC </th>
    <th scope="col"> Montant total LoyerTTC </th>
    <th scope="col"> Montant total Caution </th>
</tr>
{% set sommeHC = 0 %}
{% set sommeTTC = 0 %}
{% set sommeCaution = 0 %}
{% for b in baux %}

    {% set sommeHC = sommeHC+b.montantHC%}
    {% set sommeTTC = sommeTTC+(b.montantHC+b.montantCharges)%}
    {% set sommeCaution = sommeCaution+b.montantCaution%}
{% endfor %}
<tr>
    <td></td> <td></td>
    <td>{{sommeHC}}</td>

    <td>{{sommeTTC}}</td>

    <td>{{sommeCaution}}</td>
</tr>

</table>
</div>
</div>
{% endblock %}